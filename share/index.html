<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>WakeMedi Share</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      // í˜„ì¬ URLì˜ ì¿¼ë¦¬ìŠ¤íŠ¸ë§ì—ì„œ data ì¶”ì¶œ
      const params = new URLSearchParams(window.location.search);
      const data = params.get("data");

      // ì•± ì»¤ìŠ¤í…€ ìŠ¤í‚´ (ì•±ì— ì—°ê²°ë  ì£¼ì†Œ)
      const appUrl = `wakemedi://share?data=${encodeURIComponent(data || "")}`;

      // ì•±ìŠ¤í† ì–´ / í”Œë ˆì´ìŠ¤í† ì–´ fallback URL
      const playStoreUrl = "https://play.google.com/store/apps/details?id=com.example.wakemedi";
      const appStoreUrl = "https://apps.apple.com/app/idYOUR_APP_ID"; // ğŸ”¹ ì‹¤ì œ iOS App ID ë„£ê¸°

      // ë””ë°”ì´ìŠ¤ í™•ì¸
      const ua = navigator.userAgent || navigator.vendor || window.opera;
      let fallbackUrl = playStoreUrl;
      if (/iPad|iPhone|iPod/.test(ua) && !window.MSStream) {
        fallbackUrl = appStoreUrl;
      }

      // ì•± ì‹¤í–‰ ì‹œë„ â†’ ì‹¤íŒ¨í•˜ë©´ fallback
      const iframe = document.createElement("iframe");
      iframe.style.display = "none";
      iframe.src = appUrl;
      document.body.appendChild(iframe);

      setTimeout(() => {
        window.location.href = fallbackUrl;
      }, 2000);
    });
  </script>
</head>
<body>
  <h2>WakeMedi ê³µìœ  ë§í¬</h2>
  <p>ì•±ìœ¼ë¡œ ì´ë™ ì¤‘ì…ë‹ˆë‹¤...</p>
  <p>ìë™ìœ¼ë¡œ ì—´ë¦¬ì§€ ì•Šìœ¼ë©´ <a id="manualLink">ì—¬ê¸°</a>ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>

  <script>
    // ìˆ˜ë™ í´ë¦­ìš© ë§í¬
    document.getElementById("manualLink").href = window.location.href;
  </script>
</body>
</html>
